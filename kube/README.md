### Deployment vs StatefulSet

#### Deployment:
Deployment управляет набором модулей для запуска рабочей нагрузки приложения, обычно не сохраняющей состояние.
Развертывание обеспечивает декларативное обновление подов и наборов реплик.

Вы описываете желаемое состояние в развёртывании, а контроллер развёртывания изменяет фактическое состояние на желаемое.

#### StatefulSet:
StatefulSet запускает группу модулей и сохраняет неизменяемую идентификацию для каждого из них. Это полезно для
управления приложениями, которым требуется постоянное хранилище или стабильная, уникальная сетевая идентификация.
StatefulSet — это объект API рабочей нагрузки, используемый для управления приложениями с отслеживанием состояния.

Управляет развертыванием и масштабированием набора подов, а также обеспечивает гарантии порядка и уникальности этих подов.

Как и развертывание, StatefulSet управляет подами, основанными на идентичной спецификации контейнера. В отличие от
развертывания, StatefulSet сохраняет неизменяемую идентичность для каждого из своих подов. Эти поды создаются на основе
одной и той же спецификации, но не являются взаимозаменяемыми: у каждого из них есть постоянный идентификатор, который
сохраняется при любом изменении.

Book-service является типичным примером stateless-сервиса, так как все данные хранятся во внешней БД (PostgreSQL).
Поды не хранят состояние между запросами. Можно легко развернуть 10 реплик без настройки коммуникации между подами,
балансировщик нагрузки будет равномерно распределять запросы.

Kafka - это stateful-сервис, так как нужна стабильная идентификация узлов (kafka-0, kafka-1). Данные в kafka хранятся на
диске, поэтому к нему нужно привязать PVC(PersistenceVolumeClaim). Для общения с брокером нужно стабильное сетевое имя,
Headless Service StatefulSet обеспечивает прямую маршрутизацию. При перезапуске, например kafka-0, он получит то же самое
имя, что и раньше.